摘 要
随着计算机技术和 AI 技术近年来的不断发展进步，深度学习在图像领域取得了令人瞩目的成果，也让深度学习与艺术鉴赏领域的结合成为可能。课题定位深度学习技术应用，利用深度学习 CNN 在图像处理上的优势与绘画流派分析这一应用场景进行结合，实现 CNN 在艺术流派分类上的应用探索，建立起算法，数据，应用一体的平台，为艺术流派分析和 CNN 流派分类的发展提供启发。
课题定位深度学习应用，建立爬虫引擎人工收集了 2000+的油画数据，实现收集预处理一体化，在时代，画家和流派三个方面进行了人工标注并实现预处理。利用 PyTorch 平台搭建了 VGG，ResNet，GoogleNet，DenseNet，InceptionV4 的网络结构，通过实验对比了在自标注数据集上的表现，研究并探索了适合数据集最优的兼顾泛化性和准确度的网络结构模型。以算法模型为依托，数据为支撑，实际需求为导向分析设计了以 RESTAPI 的形式为终端用户提供服务的服务端设计。确立算法服务包括画家推测、绘画流派分析、以及绘画时代推测等基础功能。数据服务主要是对爬虫引擎收集到的绘画数据以及画家数据 CRUD 操作，同时对提供给前端的数据展示服务。根据设计方案依托 PyTorch+Flask+Vue 的技术栈完成了算法引擎、服务端以及 WEB 前端的实现，并按照预定的测试用例完成测试报告。
算法模型经过实验取得了预计的准确度和泛化性要求，验证了 CNN 特征提取在艺术流派分析领域的可能性。依靠 PyTorch、Flask、Vue 构建了算法，服务，前端一体的可用 WEB APP，满足了预期的艺术鉴赏、流派分析、数据挖掘等维度的需求，通过了功能性测试和非功能性测试，提供了较为完备的业界实践。

关 键 词：流派分类；深度学习；WEB 应用；卷积神经网络；Vue

论文类型：应用研究

1 绪论
1.1 选题意义及应用背景
绘画是对人类精神世界的重要表达，体现着人类的精神追求，反映着时代的变化和发展。我们通过美术作品认识不同时代，不同民族，不同文化，不同社会制度下人们的生活，历史，风俗，行为，观念等，甚至包括认识我们连自己在内的整个世界。
人类最早的的绘画产生于旧石器时代晚期，被绘制在原始洞窟岩壁上气势恢弘，栩栩如生，堪称自然主义杰作。中世纪的漫长时期，处于古典文明的结束与复兴之间。艺术特点呈现怪诞、迷惑，甚至贬为丑恶，基督教占主要地位，于是图画也为之服务。文艺复兴时期早期画家乔托、马萨乔等把人文思想与对自然的逼真描绘结合，虽还具呆板僵硬痕迹，却显出了与中世纪不同的现实主义风格。15 世纪末到 16 世纪中叶，画家注重光与影的表现，追求享乐主义的情调，产生了深远的影响。17 世纪的西方绘画又开创了一个生气勃勃的新局面，巴洛克强调强烈的动势、戏剧性、光影对比及空间幻觉等特点;古典主义强调理性、形式和类型的表现，忽视艺术家的灵性、感性与情趣的表达;写实主义拒绝遵循古典艺术的规范以及'理想美'，也不愿意对自然进行美化，即忠实地描绘自然。18 世纪的西方绘画，洛可可风格兴盛一时。与此同时，写实主义也得到发展带来华丽、纤巧、追求雅致、珍奇、轻艳、细腻的感官愉悦。19 世纪欧洲绘画蓬勃发展，大致分为新古典主义、浪漫主义、写实主义、印象主义、新印象主义和后印象主义。20 世纪的绘画史，随着现代主义的思潮，在艺术理论与观念上与传统绘画分道扬镳，强调主观情感的抒发，强调艺术的纯粹性及绘画语言自身的价值，他们排斥功利性，对描述性和再现性的因素也不以为然，他们认为最重要的是组织画面结构，表达内在情感，营造神秘梦境。其主要流派有:野兽主义、立体主义、巴黎画派、表现主义、未来主义、维也纳分离派、风格主义、达达主义、形而上画派、超现实主义、至上主义、抽象表现主义、波谱艺术、光效应、新超现实主义、超级写实主义。
艺术作品在形态和作品形式上有很大的差异，隶属于不同的美术门类，每个门类都有自己的艺术特点和形式规范，需要将其分成不同的门类，按照自己的艺术特点去鉴赏，作品产生的时代背景不同，作品也呈现出较大的差异，同一个艺术家在不同的创作时期，作品也呈现不同的特点。艺术家在创作的过程中，还会形成自己独有的艺术风格，而这些特点往往很难用语言描述清楚。
对于绘画流派的分类，受限于艺术鉴赏的主观性和抽象性，其分类界限并不明确，仅靠专家或者人工的主观判断进行分类往往并不能很好的达到分类的效果。绘画特征难以表达，易受人主观性的影响，每个画家在长期的艺术创作中都形成着各自鲜明的特点，这些风格特征时常显得抽象而难以形容，使得艺术品流派，绘画风格分类主观性较强。
传统方法在对画作进行分析的时候主要是通过各种对图像进行预处理和各种变化在笔触，颜色，形态上提取特征，人工提取图像特征过程繁琐而复杂，需要更加专业的艺术背景，且抽离的图像只是图像的局部特征且包含了部分人的主观性，使得分类效果有时候并不能真正反映绘画之间的内在联系。
近年来深度学习不断发展，基于此提出一种用 CNN 神经网络进行绘画流派分类的尝试。深度学习实质是一种特征学习方法，原始数据通过一些简单、非线性的模型变换，成为更高层次的、更加抽象的表达，可以提升处理复杂分类问题时泛化能力，比浅层学习优势大，自动地从大量数据学习特征，更加精准地表征数据内部隐藏的丰富信息。
用卷积网络解决传统方法人工提取特征和细节丢失等问题，由于其局部感受野和权值共享特性，减少了网络模型权值数量，从而降低了网络模型的复杂度．且卷积神经网络结构对平移、倾斜、比例缩放等变形拥有高度不变性，从而提高了分类识别的鲁棒性，提高运算效率。利用卷积神经网络发掘低层特征之间的联系，提取绘画图像特征，对得到的特征进行 PCA 降维、归一化等操作后，利用支持向量机(SVM)分类器进行分类。
课题目的是建立一个基于机器学习的绘画分析（风格流派，创作时间）系统，力求在绘画流派分类鉴赏层面提出一个自动化的思路和应用场景的尝试，对以后的艺术品估价，来源难以考证的艺术品信息推测，艺术抄袭，基于内容的艺术品推荐等领域提供一个可行的应用尝试，对流派不可考证，来源不明的绘画艺术作品进行流派分析和时段预测，对艺术史的研究提供一种可参考的意见及建议，对绘画流派分类研究的发展均有重大意义。随着 AI 技术的不断发展，逐渐渗透于生活的方方面面。AI 的应用层出不穷，利用 AI 技术以及大数据技术发展提供的便利，构建一个集算法应用的数据服务型平台也逐渐成为可能。甚至可能发展成为具有人工智能形态的线上艺术馆。
目前线上艺术馆以各个艺术馆的官网为主，我要做的是整合这些作品，做一个第三方的，应该是要取得授权才行，绘画周边的售卖，绘画服务

1.3 论文的主要研究内容
课题定位利用深度学习图像算法处理绘画流派分析鉴赏的 WEB 应用，对此做了以下针对性研究实践。
1）（基于深度学习的）油画分析系统算法的研究
结合选题应用背景以及深度学习图像领域算法的研究结论，尝试通过实验和分析研究利用深度学习图像领域的相关技术提取油画图像特征的尝试，探究获取的这些图像维度的特征对于实际艺术流派的鉴赏的作用。通过对网络结构的优化的相关实践，建立结构合理的卷积神经网络结构模型并对网络实验结果的分析评估。课题计划在流派分类上运用 CNN 的特性在人工标注的训练集上进行有监督训练，通过更改网络结构以及参数等手段优化性能，最终形成可用的流派离线分类器。
2）（基于深度学习的）油画分析系统的分析
结合选题背景以及对油画分析系统算法的研究内容，为了提供系统实现更加有力的指导。结合实际客观存在的需求，对整个油画分析系统的应用场景进行分析，挖掘潜在干系人，梳理（基于深度学习的）油画分析系统的需求描述，立起系统的分析模型以及确立系统最后需要达到的功能性和非功能性需求。包括数据库设计、服务设计、UI 设计等。为后面建立分析模型打下基础。
3）（基于深度学习的）油画分析系统的设计
根据分析阶段确立的功能模型、结构模型和行为模型，兼顾非功能需求的前提下，选择适合的软件体系结构、确立关键技术的实现方案，评估可行性。确立整个系统的全方位分析模型。完成了包括 RESTAPI 服务，数据库事务、数据预处理与爬虫引擎的协同，前端工作流和框架设计。
4）完成集算法、服务、WEB 前端一体的深度学习应用
选择合适的技术栈，根据设计阶段确立的软件体系结构和模块结构，完成分析阶段确立的各项需求，完成系统功能性和非功能性测试，并对完成结果进行评估，输出以数据为支撑的，AI 服务为载体的 WEB APP 应用，通过模型对作品的艺术信息进行预测评估并给出基于相似度的相关推荐。

1.4 论文的组织结构
第 1 章 绪论
本章主要介绍选题的背景以及应用场景，分析了目前国内外相关的研究现状，同时列出了论文主要的研究内容，确立了论文的组织结构。
第 2 章 （基于深度学习的）油画分析算法的研究
本章主要介绍针对油画分析的特点，应用深度学习图像领域相关技术，在模型选择，特征提取和分析上进行的相关研究和实践，其中包含相关涉及技术的简单介绍。内容包括对于油画特征提取的相关研究，网络结构的选择与搭建，以及对于网络实际效果的应用与评估。
第 3 章 （基于深度学习的）油画分析系统的分析
本章主要介绍整个油画分析系统的需求分析和。
第 4 章 （基于深度学习的）油画分析系统的设计
本章基于系统的分析模型，对系统整个的设计方案进行论述，包括系统的概要设计和详细设计以及系统的关键技术设计。
第 5 章 （基于深度学习的）油画分析系统的实现与测试
本章基于系统的设计模型，结合实际的实现和测试情况，论述（基于深度学习的）油画分析系统的实现方案，包括开发测试环境的介绍、技术栈选择的依据，系统主要的功能实现细节和运行效果。
第 6 章 结论与展望
本章主要总结了论文主要完成的工作内容并指出了目前存在不足的一些问题。并有针对性地提出了后续工作需要加强改进地地方。同时对系统后续的迭代升级做了展望。

2 （基于深度学习的）油画分析算法的研究
本章介绍课题应用的算法模型的研究与设计，目的是设计和选择出针对油画特性适用的算法模型用于特征提取以及特征分析，其中包含相关涉及技术的简单介绍。内容包括对于油画特征提取的相关研究，网络结构的选择与搭建，以及对于网络实际效果的应用与评估。
2.1 油画分析相关技术
课题应用的目的在于挖掘油画之间的抽象隐含信息，定位是图像特征提取，模式识别的有监督学习的分类问题，这里针对课题背景介绍主要与之相关的深度学习和图像处理技术。
2.1.1 图像预处理相关技术
利用深度学习技术进行训练的时候需要考虑对训练集的图像数据进行预处理，主要原因和方法包括：
1）适应神经网络结构：网络结构可以接收的数据格式/类型是固定的，因此在训练过程之前，需要将训练样本预处理成为可以被神经网络读取的格式/类型；
2）对训练样本进行提纯：训练样本中可能存在“不好的数据”，通过预处理手段，可以将这部分数据剔除掉，或者消除掉它的影响；
3）进行数据增强：对训练样本进行预处理，可以增加数据的多样性。例如通过旋转、镜像、裁切等手段，将图片的空间多样性呈现出来，据此训练出来的模型也将具有更好的鲁棒性；
4）数据归一化：预处理可以将不同规格的数据转换成相同规格的训练数据，最典型的的例子就是图片的尺寸归一化。
5）压缩数据体积：预处理还可以减小训练数据的尺寸。例如原始数据是 FHD 尺寸的，若压缩至 QQVGA 则会大幅缩减数据体积。

2.1.2 图像特征提取领域传统技术
1）SIFT：尺度不变特征变换(Scale-invariant features transform)。SIFT 是一种检测局部特征的算法，该算法通过求一幅图中的特征点（interest points,or corner points）及其有关 scale 和 orientation 的描述子得到特征并进行图像特征点匹配，获得了良好效果。SIFT 特征不只具有尺度不变性，即使改变旋转角度，图像亮度或拍摄视角，仍然能够得到好的检测效果
2）SURFSURF:加速稳健特征（Speeded Up Robust Features）。SURF 是对 SIFT 算法的改进，其基本结构、步骤与 SIFT 相近，但具体实现的过程有所不同。SURF 算法的优点是速度远快于 SIFT 且稳定性好。
3）HOG:方向梯度直方图（Histogram of Oriented Gradient）。
4）DOG：高斯函数的差分(Difference of Gaussian)。
5）LBP 特征：局部二值模式（Local Binary Pattern），具有灰度不变性和旋转不变性等显著优点。由于该特征的简单易算性，虽然其总体效果不如 Haar 特征，但速度则快于 Haar，所以也得到了广泛的使用。
6）Haar 特征：Haar 特征是一种反映图像的灰度变化的，像素分模块求差值的一种特征。矩形特征对一些简单的图形结构，如边缘、线段较敏感，描述在特定方向（水平、垂直、对角）上有明显像素模块梯度变化的图像结构。

2.1.3 神经网络相关技术
目前现有的最经典主流方法就是 CNN 的方法，CNN 针对图像问题提出，在组织特征上是业界最佳实践，包括 GAN 这种在绘画上取得尝试的方法，在特征提取上依然采用的 CNN 的结构提取特征，理论上只要是图片数据，甚至二维向量数据，均可以使用卷积神经网络模型提取特征。
CNN 方法的核心是利用卷积核，模型结构，池化以及激励函数搭建网络提取特征，通过有监督学习的方式，训练出兼具泛化性和准确度的模型，解决分类问题或者回归问题，或者提取特征作为中间变量和其他网络输出。
AlexNet 包含 6 亿 3000 万个连接，6000 万个参数和 65 万个神经元，拥有 5 个卷积层，其中 3 个卷积层后面连接了最大池化层，后面还有 3 个全连接层，证明了 Relu 在较深网络下效果优于 sigmond，解决了梯度弥散的问题，引入了 Dropout 解决过拟合的问题，使用最大池化解决平均池化的模糊化效果，提升特征丰富性，提出 LRN 层对局部神经元的活动创建竞争机制，相应较大的变得更大，抑制反馈较小的神经元，增强泛化能力。使用 CUDA 进行训练，随机从 256*256 的原始图像中截取 224*224 大小的区域进行数据增强，以及水平镜像，进行预测的时候也是一样，取平均值。
VGG 网络由牛津大学计算机视觉组提出，反复堆叠 3*3 小型卷积核和 2*2 最大池化，构筑了 19 层的卷积神经网络。这种网络结构迁移性和泛化性都很强，在其他数据集上表现良好。训练的时候可以先选用 A 型网络结构预训练的权重作为初始权重，加快收敛速度，VGG 证明了几个观点，就是 LRN 层作用不大，越深的网络效果越好，1*1 的卷积核不如 3*3 的卷积核有效，大的卷积核可以学习更大的空间特征
InceptionV4 网络有 22 层深，参数量相对较少，性能优异。去除了最后的全连接层（因为参数巨大，且会引起过拟合），改用平均池化去代替。Inception 网络采取（此处需要详细阐述 Inception 优势）

2.2 数据集的整理与准备
2.2.1 数据集的选择标准
考虑到绘画的流派众多且分类标准不一，考虑到分类粒度的问题，业界尚未有一个规范权威的标准。本课题选择自文艺复兴盛期到二战结束这段绘画艺术高度发展壮大时期最有代表性的 9 大流派作为初步的分类领域（文艺复兴盛期、巴洛克、浪漫主义、印象派、后印象派、表现主义，立体主义、波普主义、抽象主义）。

图 2 2 课题中选择的绘画流派

针对不同的流派，涉及了如下的命名方式
AA_BB_CC.jpg
AA 代表时代维度上的标签，BB 代表流派维度上的标签，CC 代表画家维度上的标签，以下划线作为分割，方便算法框架进行训练。

图 2 2 课题中部分数据集

2.2.2 数据预处理
由于网上收集到的图片质量良莠不齐，个别图片存在水印
数据预处理采取的方法与 AlexNet 训练使用的类似
着力解决样本不均衡的问题，进行数据增强
利用 PIL 库进行图像预处理，随机裁剪和平移，进行数据增强，消除图像位置等因素对模型准确率的影响。
数据增强不满足于 PyTorch 内置的 PIL 库的办法，采用 OpenCV 的自定义方式，进行特征工程（去噪，噪声是什么，增强，增强什么），是不是画作的一部分就可以体现绘画的特征呢，可不可以利用那些在训练中错误的值去提升样本的性能
最终形成的数据集如下表所示：
表 4 3 Era 数据集概况
时代名称 时期（世纪） 数据量（张） 详情
文艺复兴 14-19 2400 现实主义、巴洛克、浪漫主义等
古典主义 19-20 1700 印象派、后印象派、野兽派等
现代艺术 20+ 2500 抽象主义、立体主义、超现实主义等

表 4 3 Style 数据集概况
流派名称 数据量（张） 详情
文艺复兴 330 包括安德烈萨奇、拉斐尔、达芬奇、乔尔乔内等
巴洛克 950 包括伦勃朗、鲁本斯、哈尔斯、维米尔等
浪漫主义 530 包括德拉克洛瓦、康斯太布尔、透纳等
现实主义 600 包括列宾、马奈、库尔贝、米勒、德加等
印象派 530 包括雷诺阿、毕沙罗、莫奈、莫里索等
后印象派 500 包括保罗塞尚、高更、乔治修拉、梵高等
野兽派 400 主要是安德烈德兰、马蒂斯的作品
象征主义 310 包括基尔希纳、蒙克、弗朗兹马克的作品
抽象主义 640 包括蒙德里安、保罗克里、纽曼、波洛克等
立体主义 520 包括基里科、乔治波拉克、毕加索的作品
超现实主义 550 包括马松、胡安米罗、达利的作品
达达主义 330 包括乔治格罗斯、马克思恩特曼、皮卡利亚等
波普艺术 210 凯斯哈林、爱德华卢沙、安迪霍沃尔

这里的数据集时系统最初构建的数据集，后续会将数据集的管理以自动化模块的形式嵌入系统。

2.3 网络结构的选择和搭建
2.3.1 网络模型的选择依据
准确度、效果、高效
1）网络过程的改进

将 Inception 结构的 7*7 卷积变为 7*1 和 1\*7 的
CNN 的使用方法其实主要就是利用卷积核提取特征，组合池化层，
由于课题的定位最终的目的在于流派鉴赏
联系到计算机解决视觉问题的步骤，结合计算机对图像数据的存储实质上是对向量的理解处理，涉及一些矩阵运算的部分
首先要明确的是将问题定位为一个纯粹的图像分类问题，还是将中间的维度保存下来，作为后续其他网络的输出进行优化。
对于网络结构的选择，还是选择了卷积神经网络，
要搞清楚的第一个问题，其实是画作风格的分类标准是不是和物体类别分类一致
最终解决的是分类问题网络结构的最后一定是跟一个 Softmax 分类器，或者是其他中间值，再经由其他网络单元进行应用放大或者再接一个其他的网络结构，需不需要保持原图的大小也值得考虑。
问题定位多类别分类，利用最后一层的 Softmax 逻辑回归分类器，本质上也是一对多的扩展。
在模型的选择上，考虑到绘画艺术的抽象性，想要得到泛化效果好的模型，应该避免层数过深而造成的过拟合，同时由于提取信息的位置差异，选择卷积核大小可能相对困难。要求网络结构更宽而非更深，用不同大小的滤波器级联来达到更好的效果，因此在图像分类表现良好的 VGG 和 Inception 结构中选择后者作为本课题的网络模板。

2.3.2 网络模型的搭建
模型的搭建选择 InceptionV4 的结构
在画家分析上选择残差网络结构。
对于画家模型采用残差结构训练，因为彼此图像的区分度小
此处介绍两张模型结构图并做展示
2.4 网络效果的分析与评估
2.4.1 网络的最终实验结果
经过测试，InceptionV4 的性能在数据集上准确率表现最为良好
XXXXXXX 此处缺少最终的测试表
2.4.2 网络实验结果的分析评估
从准确率（识别率），敏感度（召回率），特效性和精度四项数据进行分析
首先数据集这里问题还是相对较大，首先人工标注的数据集准确程度
此处给出最后一次的准确度分析表
2.5 本章小结
本章针对性地介绍了深度学习和流派分析所涉及到的相关技术，阐述了数据集的选择标准和数据集概况，通过对网络结构的研究分析搭建了结构合理的卷积神经网络模型，下一章将利用本章建立的算法模型，通过对应用场景的分析梳理需求，建立系统的分析模型。
3 （基于深度学习的）油画分析系统的分析
本章将基于上一章对于油画分析系统算法的研究内容，结合实际客观存在的需求，对整个油画分析系统的应用场景进行分析。针对场景梳理（基于深度学习的）油画分析系统的需求描述，建立起系统的分析模型以及确立系统最后需要达到的功能性和非功能性需求。
3.1 系统的需求描述
定位是 WEB APP，以艺术鉴赏工具为出发点，后续的计划是形成平台，接入很多机构，形成线上博物馆，同时利用收集到的数据，对 GAN、CNN、流派分析鉴赏研究提供后续的数据支撑。提供的服务包括绘画分析，绘画鉴赏，数据挖掘。
该章论述（基于深度学习的）油画分析系统的分析。
该章应首先描述 XXX 系统的功能性需求，主要描述业务逻辑。描述业务逻辑时，一方面给出较详细的文字描述，另一方面建议使用 UML 中的活动图，因为它不仅支持并行行为描述，而且提供泳道（swim lane）或格（grid）划分机制以清晰反映机构各部门在业务流程中的职责。描述业务逻辑的活动图的数量建议；由于是全局性描述，一幅活动图即可。
接下来，该章应为 XXX 系统建立分析模型，包括功能模型、结构模型、行为模型。三种模型的描述手段各不相同，但都由文字段和典型 UML 图组成。注意：文字段始终是必需的，否则学位论文的易读性将大受影响。
产品的方向决定产品的功能，目前罗列了所可能需要的功能，这里要尽量去除与产品相悖的功能，不利于产品的功能，与产品无关的功能，不重要的功能，选择顺应产品的核心功能，辅助功能点
3.1.1 平台的功能及目的
该平台的主要用户为：
（1） 艺术相关领域鉴赏人员;
（2） 艺术及绘画爱好者;
（3） 热爱生活，热爱分享的极客;
（4） 系统的管理员;
（5） 艺术领域的相关机构;
该平台的目的：
（1） 为艺术爱好者们提供一个分析鉴赏的工具，也是核心功能点。
（2） 通过用户的反馈使模型更加精确，对预测的结果进行人工修正
（3） 利用系统的收集到的特征为艺术品流派的鉴赏工作提供启发。
（4） 建立良好的平台吸引更大规模的数据，资料。利用数据创造二次价值。

实际生活中可能会有这样的需求
首先是这样的一个场景，我去转美术馆，拍照扫描一幅画，得到它的背景故事，和相似推荐
第二个场景是我画了一幅画我想知道它比较接近谁的作品
第三个需求就是把它当我的线上艺术馆
可能需要浏览自己的分析记录和历史
课这里觉得利用现有样本训练一个过拟合的网络没有任何必要，其次，网络过深对于这种本身具有抽象性的油画是不是一定就是好事。

3.1.2 系统的功能性需求
平台在功能上主要包括
（1） 用户管理：管理用户的鉴赏数据，收藏数据，设定用户权限，不同用户、组、不能访问其他用户、组的数据，任务。
（2） 模型管理：主要用于管理员添加，删除，管理配置模型，不同的算法适用于不同的任务，该模块要求平台可以通过这个功能动态增加各个算法模型及其使用界面。
（3） 数据管理：主要用于为特定任务管理数据，数据标注信息，包括添加数据、标注数据、删除数据等。
（4） 油画数据分析（任务管理）：系统最为核心的功能点，需要创建任务，与用户、算法模型和数据包以及传入数据想绑定。包括创建分析任务，修改分析参数、执行分析任务。
3.1.3 系统的主要业务逻辑

图 3 1 系统主要业务逻辑图
系统的核心功能是依托算法引擎，根据用户上传的图片或者数据库中的图片进行 AI 分析预测，输出包括流派分析、时代分析、以及画家分析三个维度的预测信息。完成这样的工作首先需要建立以数据为支撑的服务端，服务端的功能完成对算法引擎的调度，同时完成数据库的管理调度，爬虫引擎的管理调度。服务端以 REST API 的 WEB 服务的形式为终端提供算法服务。
……
3.2 系统的分析模型
在对 XXX 系统进行分析时，应从三个维度分别入手建立相应的模型。综合面向对象的相关理论和技术，三个维度的分析模型分别为功能模型、结构模型（也称静态模型）、行为模型（也称动态模型）。
3.2.1 系统的功能模型
对于分析阶段的功能模型，这里使用 UML 中的用例图来描述。

图 3 1 ArtMind-Web 端用例图
WEB 端涉及的参与者主要有系统管理员和普通用户，系统管理员主要通过系统完成数据以及模型的管理。数据管理主要目标是管理用户信息，以及系统中存储的作品数据，画家数据等。模型管理主要是添加，删除，启动，停止后台提供的训练模型。普通用户通过 WEB 端应用，可以上传图片，分析作品，关注浏览画家画作信息。

图 3 1 ArtMind-Server 端用例图

Server 端需要能够做到
用例图的数量建议：至少三幅，至多五幅。
……
3.2.2 系统的结构模型
关于分析阶段的结构模型，建议使用 UML 中的类图。在构建分析类图时，应尽量给出对象、类、类间关系的抽象过程。必要时，不妨给出针对问题描述某个片段的类抽象过程描述。
根据需求描述平台需要具备的功能包括算法模型引擎，数据管理引擎，以及后端服务引擎还有前端展示引擎。
针对平台使用场景和潜在功能抽象出，系统应该具有的类
（1） 爬虫引擎：负责早期为系统建立数据集提供自动化的解决方案，后续目标是建立自动化的数据集构建解决方案，帮助系统建立标注完善的海量数据，为模型引擎以及终端用户提供数据服务。
（2） 模型引擎：负责对 CNN 图像算法进行包装

图 3 2 ArtMind 系统结构模型
……
3.2.3 系统的行为模型

关于分析阶段的行为模型，建议使用 UML 中的活动图。活动图适合描述问题空间中多个对象之间的协作与依赖，反映的业务过程包括顺序、分支、循环、并发等执行逻辑。活动图描述的篇幅建议：四页足矣！活动图的数量建议：至少三幅，至多五幅。
关于活动图的注意事项，请对照图 3-4、图 3-5 中的活动图示例。
ArtMind 绘画分析活动

1）“分叉”（fork）与“汇合”（join）图符均为实心同步棒，必须配对使用。两个同步棒之间存在的多个（至少两个）动作分支流之间必须是并发/并行语义。
2）“决策”（decision）与“合并”（merge）图符均为空心菱形，必须配对使用。
3）“决策”菱形图符之后的所有出流上都必须标注置于中括号内的警戒条件，菱形图符旁或内均不需要标注任何条件。
4）任何动作节点均不允许直接有多个入流和/或多个出流，因为语义不明确。应首先使用“合并”菱形图符（对应于条件选择语义）或“汇合”同步棒图符（对应于并发并行语义）进行收敛，然后再连接到后继动作节点。
5）表示 UI 动作的选择语义时只能使用“决策”菱形图符。
6）当强调活动图中不同动作节点究竟由谁执行时应绘制带“泳道”的活动图。但是，“泳道”之间的分割线是不带任何装饰的实线。
7）活动图的“开始”与“结束”节点必须使用各自的图符，即实心圆与牛眼图符。
8）活动图周围最好不要画任何边框。

图 3 4 活动图示例

图 3 5 带“泳道”的活动图示例
……
3.3 系统的非功能性需求分析
为保证系统使用顺畅和满足需求，在非功能性需求的指标上，需要满足如下标准：
3.3.1 分析反馈响应速度
实际的分析结果应该限制在 60 秒，
3.3.2 识别的准确率
系统需要保证 85%以上的识别率，才能基本满足用户需求
3.3.3 友好的用户界面
需要提供用户界面友好，操作便捷的 UI

3.4 本章小结
本章分析了系统潜在的用户特征以及基于用户场景的分析探索，梳理需求建立了（基于深度学习的）油画分析系统的分析模型，阐述了系统应该具备的所有功能点，并经过对场景的抽象，建立了系统的结构模型，并对系统需要具备的非功能性需求进行了描述。
Equation Chapter (Next) Section 1

4 （基于深度学习的）油画分析系统的设计
本章基于上一章针对（基于深度学习的）油画分析系统的分析结论，对系统整个的设计方案进行论述，包括系统的概要设计和详细设计以及系统的关键技术设计。
4.1 系统的概要设计
本章论述（基于深度学习的）油画分析系统的设计。分为概要设计与详细设计两部分，概要设计将论述软件体系结构和功能模块结构。概要设计主要论述 XXX 系统的。详细设计则根据结构模型，阐述系统的类设计、用户界面（即 UI）设计、关键技术设计、数据库设计等。篇幅建议：至少为十六页，最好为十八页，至多为二十页。
4.1.1 系统的软件体系结构
设计 XXX 系统的软件体系结构时，不要大篇幅地描述已有的软件体系结构方面的理论，而应结合 XXX 系统的功能性需求遴选合适的体系结构风格或者组合几种简单的体系结构风格。当然，确需设计全新的软件体系结构时，也应明确设计原则。
如 3.3 节所述，设计 XXX 系统的软件体系结构时，往往还必须考虑某些非功能需求。此时，应彰显这种呼应关系。

基于深度学习图像技术的 WEB 应用核心在于对数据的管理，数据管理是应用的核心，作为画廊类型的应用以及线上博物馆性质的作品，数据扮演关键作用。分析阶段确立了服务端作为连接 WEB 终端以及算法模型的纽带，应该充当协调者和调度者的角色。服务端要能最大限度地在数据管理上完成需要具备的功能项。
爬虫要定时从网络爬取相应的数据存储在数据仓库中，图像预处理功能模块则需要对爬虫数据进行处理，这里采用的是管道过滤器的体系结构风格，前端收集的用户反馈最终要通过 Flask 服务更新在数据仓库，
这里选择仓库体系结构作为主要核心的风格
管道和过滤器这里画作的爬取和预处理的体现
……
4.1.2 系统的功能模块结构
以下是树形结构分支图描述各个功能模块之间的层次关系：

图 4 1 系统的模块结构图

（基于深度学习的）绘画分析系统以下简称“ArtMind”从功能模块划分，分为模型引擎，服务端以及数据库服务还有 WEB 前端四部分，其中模型引擎对算法实现进行封装提供底层 AI 能力，目前基于算法引擎的研究成果提供“时代分析”、“流派分析”以及“画家推测”三方面的能力。数据库负责对系统中涉及的数据进行存储、访问的相关能力。
……
4.2 系统的详细设计
所谓 XXX 系统的详细设计，是指考虑了计算机空间（或解空间）的理论和技术之后对分析模型的细化或精化。相应地，分析阶段所获得的功能模型、结构模型和行为模型都会被进一步诠释。
相对而言，分析阶段功能模型的进一步诠释在概要设计阶段已基本完成。因此，该节应主要诠释分析阶段的结构模型和行为模型。
注意：结构模型的核心是类图，分析阶段的类图仅包括问题空间的类和类间关系，而设计阶段的类图将加入更多的解空间类和相应的类间关系。与此同时，设计阶段的类设计还应完善问题空间类的属性和操作。
分析阶段的行为模型一般基于活动图进行表达，亦可基于顺序图进行表达。无论分析阶段行为模型采取哪种表达，设计阶段都应把参与动态交互的对象分为三类：实体对象、控制对象、界面对象。
一般地，实体对象应融合进 XXX 的类设计，控制对象应主要体现在 XXX 系统的关键技术设计环节，界面对象应体现在 XXX 系统的 UI 设计方面。
4.2.1 系统的类设计
类设计的核心任务是为若干关键类的主要操作设计具体的算法，包括数据结构的设计。注意：应提供算法的伪码描述。
顺序图适合描述解空间中多个对象之间的消息交互序列，反映的是事件驱动风格的算法过程。典型地，一个顺序图只描述单个主要操作的算法。顺序图通过每名参加者下方的垂线（即生命线）以及各个消息依次向下的顺序来描述交互，顺序图中的参加者往往就是对象。顺序图的数量建议：至少三幅，至多五幅。顺序图描述的篇幅建议：四页足矣！

1. 数据爬虫与数据服务
2. 数据请求服务
3.

关于顺序图的注意事项，请对照图 4-1 中的顺序图示例。
1）各个参与者的名字最好有下划线，以表明它是对象实例。而且，应与设计类图中的相应类名有显著的对应关系。
2）各个参与者下方的生命线均必须为虚线。
3）最左边参与者的生命线上不能出现向左的消息传递。
4）表示“请求”的消息传递应采用带实心箭头的实线，表示同步语义。
5）表示“完成/返回”的消息传递应采用带开放箭头的虚线，表示异步语义。
6）各个参与者之间的消息传递最好有语义标注，且应与设计类图中的相应操作名对应。具体地，哪个参与者接收消息，就用它所对应的类上的合适操作名标注消息。
7）在各个参与者的生命线上，激活条的开始与结束位置应与“请求”与“完成/返回”消息的箭头位置对齐，不可错位。
8）顺序图周围不要画任何边框。

图 4 1 顺序图示例
4.2.2 系统的 UI 设计
系统 UI 部分需要承载的操作，从功能模块划分
给出布局图即可，亦可用一幅典型运行截图作为 UI 设计。当然，有必要对布局图的各主要区域进行解释。
流派分析作为核心功能模块
SPA（Single Page Application）的单页核心布局，引导页使用了视差滚动和幽灵按钮的路由守卫，模型管理和画家介绍采用了经典的卡片化排版。
UI 设计这里自己最初的一个构想是模仿欧美那种单页应用的美学逻辑，
课程设计的过程中，遵循 UI 驱动设计，规避那些堆砌系统模块的设计，用更灵活的方式组织程序架构，设计的原则上也尽量化繁为简
配色设计
页面功能划分为启动页、用户主页、绘画分析功能页、画廊页
启动页，这里根据时间随机画作、画家以及背景故事
用户主页：用于显示用户基础信息、用户分析历史、用户收藏订阅的画家作品
4.3 系统的关键技术设计
这里针对系统的主要关键技术进行论述，包括爬虫引擎，模型调用，restful 服务，前端架构的相关内容。
在论述 XXX 系统的关键技术设计时，应灵活使用 UML 中的状态图、顺序图和活动图等。状态图适合描述单个对象的生命周期，顺序图适合描述多个对象之间的消息传递序列，活动图适合描述多个对象或多个功能模块之间的交互或依赖。
关于状态机图的注意事项，请对照图 4-2 中的状态图示例。
1）状态机图的“初始伪态”与“终态”节点必须使用各自的图符，即实心圆与牛眼图符。
2）状态节点之间的转换连线必须使用带开放箭头的实线。
3）转换标注必须是正体，若有警戒条件则必须置于中括号内。
4）状态机图周围不要画任何边框。

图 4 2 状态图示例
注意：仅仅给出图描述远远不够，必须给出相应的文字段。必要时，还可以通过伪码描述 XXX 系统的关键技术设计。
4.3.1 模型的关键技术设计
（1） 学习率调整

为了更好的收敛，引入学习率调整函数，控制卷积核步长

（2）
（3）
……
4.3.2 restful 服务
……分析服务
接口名称 /analyse/[Task:id]
请求方式：GET
画家主页
接口名称 /painter/[Painter:id]
请求方式：GET
请求参数：画家 ID
4.3.3 用户反馈系统对模型的影响
……这里主要解决的问题其实对数据的再标注问题，先通过海量数据的反馈，更新
4.4 系统的数据库设计
本章论述（基于深度学习的）油画分析系统的数据库设计，针对实际需求梳理需要通过数据库存储的数据类别，建立包括“（基于深度学习的）油画分析系统的概念数据模型”以及“（基于深度学习的）油画分析系统的物理数据模型”。
4.4.1 系统的概念数据模型
模型以文件的形式存储，不需要存放数据库，流派信息也直接存在服务端相关配置文件中。
在该小节中，除了给出文字段描述，还应给出相应的实体-关系图（即 E-R 图）。在现阶段，绝大多数应用系统仍然使用关系型数据库，因此 E-R 图显得更加不可或缺。注意：E-R 图绝不是类图的简单复制！
在绘制 ER 图时，最好不要采用最陈旧的形式（即用矩形、椭圆、菱形等图符分别代表实体、属性、关系等），而应采用概念数据模型（Conceptual Data Model，CDM）。提示：工具软件 PowerDesigner 和 Visio Professional 均支持 CDM 的绘制。
强烈建议使用 PowerDesigner 和 Visio Professional 绘制 E-R 图，而不要使用 ERWin，因为它们使用的图符不尽一致。PowerDesigner 使用的是 Martin 的 Information Engineering 符号，Oracle 的 Designer 产品所使用的符号也和它很相似。
注意：Visio Professional 所使用的默认图符集与 PowerDesigner 相比虽有显著差异，但是在 Visio Professional 中做如下设置即可达成一致：选择“数据库->选项->文档->常规->符号集”，然后选择“IDEF1X”。请参考图 4-4 中的概念数据模型示例。

这个表寸的是每一次数据分析的结果，T_ID（Task ID）作为主键，U_ID（User ID）作为外键，来自与 User 表为实际的任务发起人，满足数据库完整性约束。

（可选！）如果 XXX 系统在数据库服务器端使用存储过程和触发器，则必须对存储过程和触发器进行描述，或者使用 UML 中的顺序图，或者使用 UML 中的活动图。
触发器定时更新库，由于用户会不断上传新的作品数据进来，同时对于识别不正确的点具有相当的反馈，系统收集这些信息，一定时间端之后需要更新数据库，同步对数据集进行更新，模型的迭代训练随之展开。
4.5 本章小结
本章以分析阶段的模型为依据，确立了系统的软件体系结构，针对核心的功能点的设计实现进行了涉及细节的详细论述，完成了系统主要的类设计、主要功能流程的设计包括各个模块之前的协作机制、UI 展示原型、以及数据库的概念数据模型和物理数据模型为后续的实现建立理论基础。

5 （基于深度学习的）油画分析系统的实现与测试
本章基于第 4 章的设计方案，结合实际的实现和测试情况，论述（基于深度学习的）油画分析系统的实现方案，包括开发测试环境的介绍、技术栈选择的依据，系统主要的功能实现细节和运行效果。并对系统的功能性测试、非功能性测试、结果验证做了全面描述。
5.1 系统开发环境简介
前端部分基于 NodeJS、Webpack、Vue 等前端技术钱
算法部分基于 Pytorch 框架，Anaconda
后端部分基于 Flask 构建，提供 Restful API 服务供前端调用
开发环境为 Windows 平台
5.2 系统的实现
在论述 XXX 系统的实现时，应选择性给出关键数据结构定义、带丰富注释的关键代码片段、或带丰富注释的其他实现（如 XML）等。
为了改善关键代码片段的易读性，可同时给出描述代码详细逻辑的活动图。随着传统的流程图逐渐演化为 UML 中的活动图，强烈建议该节统一使用活动图样式。
5.2.1 算法模型的实现
选择灵活、简单的 PyTorch

5.2.2 服务端的架构实现
服务端架构使用 Python 编写的轻量级 Web 应用框架 Flask 构建服务端，鉴于其轻便、灵活、易扩展的特性以及与同样 Python 环境下的 PyTorch 框架可以更加紧密的结合，使整个系统统一开发语言，便于后期维护。另外 Flask 同时拥有基于 Werkzeug、Jinja2 等一些开源库，拥有内置服务器和单元测试，支持安全的 cookies，可以很轻松的配置 Restful 风格的服务供前端调用。
以系统核心功能模块绘画分析功能服务为例，一个分析任务具体由任务 id，任务发起人、目标图片、任务状态等属性构成，获取 task 列表的 url 可以设计成/todo/tasks。具体代码如下：
具体经历的步骤由如下活动图描述
接受前端图片信息，与库中图片 token 比对，获取库中 ID，调用模型接口，封装分析模型返回值，封装输出
5.2.3 前端的架构实现
前端采用目前最为流行的三大主流前端框架 Vue，UI 框架选择 Vuetify，引入其他主流前端工作库和一些第三方的插件，Webpack 封装，主要代码用 ES6 语法实现。通过 Axios 库封装请求，与服务端提供的服务完成一一对应

5.2.4 数据库实现
目前版本采用关系型数据库 MySQL
5.3 系统的测试
测试是软件生命周期的一个阶段，需要在软件测试理论和技术的指导下进行。该节应完整或部分体现测试的诸多特征，不能天马行空、以点带面。对于某些系统，测试可能非常庞杂，此时不妨遴选一些典型的测试内容，不必追求面面俱到。
该节如果撷取最新的软件测试理论和技术，则相应的测试内容、测试手段、测试步骤、测试结果有可能迥异于传统软件测试理论和技术。此时，应注意论述清楚传统与最新之间的差异。
为了体现测试的多样性，建议对 XXX 系统的某些性能进行测试并提供相应的测试结果。实际上，它们与某些非功能性需求相呼应。
5.3.1 系统的功能性测试
测试环境在
表 4 3 功能性测试报告
ID 功能名称 预期输出 实际输出
1 普通用户登陆 登陆完成 符合预期
2 管理员登陆 登陆完成 符合预期
3 上传符合要求的图片 等待操作 符合预期
4 上传不合要求的图片 任务阻塞 符合预期
5 图片尺寸不合要求 UI 提示 符合预期
6 服务端端模型调用 正确调用 符合预期
7 服务端作品数据 CRUD 操作正确 符合预期
8 服务端模型 CRUD 操作正确 符合预期
9 服务端流派分析服务 正常运行 符合预期

5.3.2 系统的非功能性测试
针对分析阶段提出的非功能性需求，在这里进行针对性实验予以验证，结果如下：
表 4 3 非功能性测试报告
ID 功能名称 预期输出 实际输出
1 分析响应速度 10s- 平均 10s 内
2 流派分析准确率 85% 目前最优 79%
3 时代分析准确率 85% 目前最优 87%
4 画家推测准确率（top3） 85% 目前最优 71%
5

可以看到和最初期待的准确率来看，并没有达到预期的准确率，推测原因，首先可能是数据集在类别分类上，由于类别过于细分导致的

5.4 系统的运行效果
以用户终端的实际演示为例，以页面路由为线索展示系统的运行效果时。

图 5 1 启动页运行展示
启动页是浏览器输入对应网址时进入的页面，每次进入会随机在服务端数据库中以背景的形式显示一副作品作为背景，同时动态更新系统中收录的作家和作品数量信息，同时现实画作相关的画家信息以及绘画故事。左侧提供路由导航，提供“画廊”、“分析器”、“个人主页的入口”，管理员登陆会额外提供“数据管理”，“和模型管理”的路由入口。

图 5 1 数据页运行展示
数据管理页是以管理员登陆时后左侧导航提供的模块页，主要目的是在前端提供给系统管理员的数据管理功能，主要是对系统中的流派信息、画家信息和画作信息的增删改查操作。

图 5 1 模型页运行展示
模型管理页面对于目前已部署以及待部署的模型予以展示，采用卡片化布局，展示内容包括当前模型的准确度以及运行状态以及数据集概况，以及模型功能展示。

图 5 1 分析页面运行展示
分析页作为核心功能上部引入了一个 PictureInput 的 NPM 第三方库，完成拖拽上传和图像宽高比自适应，正确上传图片后，底部的功能区提供可选择模型和预测功能选项，通过点击开启探索按钮，访问 Flask 的 API 服务，UI 相应区域显示正在分析的 UI 组件状态变化，最终在底部的分析内容区域展示分析时代、流派、画家推测三个维度的分析信息。

图 5 4 画廊页运行展示
画廊页面提供各个维度的数据展示，承载类似“线上绘画博物馆”的功能，可以在各个维度进行筛选。获得对于画家、作品的介绍、作品提供大图下载，收藏、订阅画家支持订阅和收藏，同时可以在各个维度进行数据筛选。
5.5 本章小结
本章主要介绍了在 PyTorch+Flask+Vue 技术栈下的系统具体实现逻辑以及主要核心功能的实现手段，完成了系统设计章节描述的系统主要功能，通过了系统功能性和非功能性测试，分析评估了测试结果。并展示了系统实际运行时候的工作流和实际使用效果。

6 结论与展望
6.1 结论
1）介绍了对于绘画流派鉴赏的相关研究背景和意义
由于深度学习在图像处理上的极大成功，尝试用卷积神经网络的方法对艺术流派分类进行实践。针对绘画流派分类，主要介绍了图像特征提取和卷积神经网络相关原理和模型构建原理，分析测试了网络结构对流派分类问题的影响，确立了模型选择的依据。
2）建立了针对流派分类问题的算法模型
通过自己设计爬虫引擎和自标注，针对场景需求构建了数据集，并人工做了标注分类，在数据集上做了对比实验分析，选择了合适的网络模型，通过更改网络结构以及参数等手段优化性能，最终形成可用的流派离线分类器。在准确率和泛化性上均达到了预期的效果，提供了探究图像分类在绘画流派分析鉴赏的算法支持。
3）建立数据管理为核心的系统设计
以建立的算法模型为依托，分析，根据软件工程方法论，分析场景梳理需求，兼顾功能性和非功能性需求，建立了数据为中心，AI 服务为核心功能的 WEB APP 应用系统的分析模型。
4）在软件工程方法论的指导下完成了系统的综合设计
根据软件方法论的指导，确立了系统的软件体系结构，确立了关键技术的实现方案，完成数据库设计、爬虫引擎设计与优化，WEB 服务设计，API 设计和 UI 设计以及前端工作流。
5）以全栈开发的形式搭建了算法，后端前端一体的 WEB 应用
以 PyTorch+Flask+Vue 技术栈为依托，完成了分析阶段下的系统具体实现逻辑以及主要核心功能。通过了系统功能性和非功能性测试，以 WEB APP 的形式完成了最后的应用输出，完成了系统预期的功能和效率。

6.2 展望
后续的工作可以在模型分析的识别率，功能项的扩展以及数据维度的探索上展开。
1）绘画分类的识别率提升
在后续的工作中可以从扩充数据集、修改网络结构、数据预处理、数据增强等方面着力提升识别准确率，同时在表现不佳的画家推测功能上进行更深的探索，虽然利用了网络训练提取客观特征，但是目前由于数据集经由人工标注分类，类别分类依然趋于主观，同时依然存在样本不均衡以及数量不足等的问题，后续可以利用反馈的数据进行再标注，以提升准确率。
2）绘画流派分类的类别扩展
目前由于前期探索阶段只能人工标注相应的数据集，目前的数据全部是西方油画的数据，后续可以考虑加入中国山水画、浮世绘等其他类别的绘画数据扩充作品集，同时对目前的算法模型进行升级迭代，提供更多的模型充实系统功能，提升系统规模。同时利用扩大的数据规模进行模型训练的迭代。
3）数据维度的深度探索
平台提供用户上传作品的接口，同时对于每一次识别的结果予以汇总储存，对于平台获取的数据以及用户通过分析获得的数据以及用户的反馈数据，可以在这之上构建数据挖掘的相关引擎，为后续模型的迭代和深度学习以及绘画流派分类的研究提供支持和启发。
针对上述的三项可提升的点，后续工作中需要完善数据通路，做到真正的自动化，减少人力成本，扩大数据规模后，不断通过实验尝试着力提升准确率，同时在系统功能上予以完善，提供一个更便利的平台为艺术流派分类鉴赏的发展提供帮助。

致 谢
在进行深度学习在绘画流派分类的探索过程中，我学习到了很多机器学习和深度学习的相关知识，读了很多有价值的论文，其中的很多知识给了我莫大的启发。在同学和导师的帮助下，感觉到了自身能力极大的提高。感谢金老师在论文写作中，对我的耐心指导。在深度学习算法应用的构建过程中，用到了本科和研究生学习阶段很多的基础知识，这里也感谢授课老师的默默付出。同时感谢那些世界历史上优秀的艺术家们和 IT 极客们，因为你们优秀的作品和灵感才能深深的启发我完成这样的尝试。感谢深度学习领域探索的先驱们，踩在巨人地肩膀上才有机会让我们有更广阔的视野，感谢学校提供的宝贵学习资源和实验器材，帮助我们顺利完成各类实验。感谢互联网资源提供的数据和知识。在论文即将完成之际，我想对他们衷心地说一声感谢！
